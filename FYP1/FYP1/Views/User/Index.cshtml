@model IEnumerable<FYP1.ViewModel.applicationDatabase>

@{
    ViewData["Title"] = "Dashboard";
    Layout = "_EmptyLayout";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>User Dashboard</title>
    <!-- Bootstrap core CSS -->
    <link href="~/AdminAssets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="~/AdminAssets/css/simple-sidebar.css" rel="stylesheet">
    <link href="~/css/datatables.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <style>
        .bgDark {
            background-color: #2a3542;
        }

        a:hover {
            color: black;
            border-bottom: 1px solid #00b297;
        }
        #EditApplicationName{
          background-color:transparent;
          border:none;
          text-decoration:underline;
           margin-left:170px;
        }
        #EditApplicationName:hover{
           color:blue;
          
        }
         #EditDATABASEName{
            margin-left:190px;
        }
    </style>
</head>

<body>

    <div class="d-flex" id="wrapper">

        <!-- Sidebar -->
        <div class=" border-right bgDark text-white" id="sidebar-wrapper">
            <div class="sidebar-heading"><span><i class="fa fa-user  mr-3"></i></span>@ViewBag.userName </div>
            <div class="list-group list-group-flush">

                <a class="list-group-item  bgDark text-white" asp-controller="home" asp-action="index">
                <span><i class="fa fa-home mr-3"></i></span>Home
                </a>
                <a class="list-group-item  bgDark text-white" asp-controller="home" asp-action="createApplication">
                    <span><i class="fa fa-plus mr-3"></i></span>Create Application
                </a>
                <a class="list-group-item  bgDark text-white" asp-controller="home" asp-action="index">
                    <span><i class="fa fa-info-circle mr-3"></i></span>About</a>


                <a class="list-group-item  bgDark text-white" data-toggle="modal" data-target="#modalContact">
                    <span><i class="fa fa-envelope mr-3"></i></span>Contact</a>
                <a class="list-group-item  bgDark text-white"  style="margin-top:440px;"
                   asp-controller="user" asp-action="logout">
                    <span><i class="fa fa-sign-out mr-3"></i></span>Logout</a>



            </div>
        </div>
        <!-- /#sidebar-wrapper -->
        <!-- Page Content -->
        <div id="page-content-wrapper">

            <nav class="navbar navbar-expand-lg navbar-light bgDark border-bottom py-1 " style="box-shadow:none;">
                <button class="btn bg-light text-dark" id="menu-toggle"><i class="fa fa-bars"></i></button>

                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ml-auto mt-2 mt-lg-0">
                        <li class="nav-item">
                            <a class="nav-link box-shadow text-white z-depth-2" 
                               asp-controller="user" asp-action="logout" >
                                <span><i class="fa fa-sign-out mr-3 "></i>Logout</span></a>
                        </li>
                    </ul>
                </div>
            </nav>

            <div class="container p-1 mt-5" style="background-color:ghostwhite">
                <div class="container-fluid mt-5">
                    <table class="table table-bordered table-responsive-md btn-table" id="tbl-applications">
                        <thead>
                            <tr>
                                <th class="text-center">#</th>
                                <th class="text-center">Application</th>
                                <th class="text-center">Logo</th>
                                <th class="text-center">Add Forms</th>
                                <th class="text-center">Edit Directory</th>
                                <th class="text-center">Delete App</th>
                                <th class="text-center">Login</th>
                            </tr>
                        </thead>

                        <tbody id="applicationDisplay">
                            @{
                                Html.RenderPartial("_listofApplication", Model);
                            }
                        </tbody>
                    </table>
                </div>
            </div>
            
        </div>
        <div class="modal fade" id="modalContact" tabindex="-1" aria-labelledby="myModalContactLabel"
             aria-hidden="true">
            <div class="col-sm-6 " role="document" style="margin-left:25%">

                <div class="modal-body">
                    <form asp-action="SendEmailToWebTiqs" asp-controller="ContactUs">
                        <div class="card contactBorder rounded-0">
                            <div class="card-header p-0 ">
                                <div class="cardBg text-white text-center py-2">
                                    <h3><i class="fa fa-envelope"></i> Contact Us</h3>
                                    <p class="m-0">We would love to hear from you!</p>
                                </div>
                            </div>
                            <div class="card-body p-3">

                                <!--Body-->
                                <div class="form-group">
                                    <div class="input-group mb-2">
                                        <div class="input-group-prepend">
                                            <div class="input-group-text"><i class="fa fa-user text-web-color"></i></div>
                                        </div>
                                        <input type="text" class="form-control" id="ContactUserName" name="ContactUserName" placeholder="Enter your name" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="input-group mb-2">
                                        <div class="input-group-prepend">
                                            <div class="input-group-text"><i class="fa fa-envelope text-web-color"></i></div>
                                        </div>
                                        <input type="email" class="form-control" id="ContactUserEmail" name="ContactUserEmail" placeholder="example@gmail.com" required>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="input-group mb-2">
                                        <div class="input-group-prepend">
                                            <div class="input-group-text"><i class="fa fa-key text-web-color"></i></div>
                                        </div>
                                        <input type="password" class="form-control" placeholder="Password" id="ContactUserPassword" name="ContactUserPassword"
                                               required />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <div class="input-group mb-2">
                                        <div class="input-group-prepend">
                                            <div class="input-group-text"><i class="fa fa-comment text-web-color"></i></div>
                                        </div>
                                        <textarea class="form-control" placeholder="Your Message" id="ContactUserMessage" name="ContactUserMessage"
                                                  required></textarea>
                                    </div>
                                </div>

                                <div class="text-center">
                                    <input type="submit" value="Submit" class="btn-web rounded-1 py-2"
                                           data-dismiss="modal" aria-label="Close">
                                </div>
                            </div>

                        </div>
                    </form>
                </div>

            </div>
        </div>
        <div class="modal fade" id="modalLoginForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header text-center bgDark">
                        <h4 class="modal-title w-100 font-weight-bold">Sign in</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true" class="text-white">&times;</span>
                        </button>
                    </div>
                    <form asp-action="Index" asp-controller="Form" method="post">
                        <div class="modal-body mx-3">

                            <input type="text" id="setDatabaseName" name="dbName" class="form-control validate" hidden />
                            <div class="md-form mb-4">
                                <input type="password" id="defaultForm-pass" name="password" class="form-control validate mb-0" required>
                                <label for="defaultForm-pass">Your password</label>
                            </div>
                            <span class="text-danger alert-danger">@ViewBag.errorMsg</span>
                        </div>
                            <button class="btn bgDark text-white" id="EditDATABASEName"  type="submit">Log In</button><br />
                    </form>

                     <form asp-action="ApplicationForgot" asp-controller="User" method="get">
                           <input type="text" id="setApplicationNameEdit" name="dbName" hidden class="form-control validate" />
                           <button type="submit" id="EditApplicationName" class="mb-2"> Forgot Password?</button>
                  </form>
                </div>
            </div>
        </div>
    </div>



    <script defer>
        function setDbName(databaseName) {
            $("#setApplicationNameEdit").val(databaseName);
            $("#setDatabaseName").val(databaseName);
        }
        $('#tbl-applications').DataTable(
            {
                language: {
                    searchPlaceholder: "Search",
                    search: "",
                },
            }
        );
        $("#menu-toggle").click(function (e) {
            e.preventDefault();
            $("#wrapper").toggleClass("toggled");
        });
        function deleteApplication(id){
        $.ajax({
            url: "/User/deleteApplication",
            type: "POST",
            data: {
                appName:$("#"+id+"deleteApplication").val()
            },
            success: function (data) {
                $("#applicationDisplay").html(data);
                location.reload();
            },
            error: function (err) {
                console.error();
            }
        });
    }

    </script>
    <script src="~/AdminAssets/vendor/jquery/jquery.min.js"></script>
    <script src="~/AdminAssets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>


</body>
</html>




























    @*<style>
            #previewSystem {
                border: none;
                background-color: transparent;
                color: lightgrey;
                position:relative;
                top:-38px;
                left:20px;
            }
              #previewSystem:hover{
                  color:white;
              }
        </style>
        <section id="container">


            <header class="header white-bg">
                <div class="sidebar-toggle-box">
                    <i class="fa fa-bars"></i>
                </div>
                <a class="logo">Web<span>Tiqs</span></a>
                <div class="nav notify-row" id="top_menu">
                </div>
                <div class="top-nav ">
                    <ul class="nav pull-right top-menu">
                        <li class="dropdown">
                            <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                                <img alt="">
                                <span class="username">Jhon Doue</span>
                                <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu extended logout dropdown-menu-right">
                                <div class="log-arrow-up"></div>
                                <li><a href="#"><i class=" fa fa-suitcase"></i>Profile</a></li>
                                <li><a href="#"><i class="fa fa-cog"></i> Settings</a></li>
                                <li><a href="#"><i class="fa fa-bell-o"></i> Notification</a></li>
                                <li><a href="login.html"><i class="fa fa-key"></i> Log Out</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </header>
            <aside>
                <div id="slideBarPTabless">
                    <div id="sidebar" class="nav-collapse ">
                        <ul class="sidebar-menu" id="nav-accordion">
                           @foreach (var item in Model)
                           {
                                <li class="sub-menu">
                                    <a href="javascript:;">
                                        <i class="fa fa-laptop"></i>
                                        <span>@item.userApplications.appName</span>
                                    </a>
                                    <ul class="sub">
                                        <li class="sub-menu">
                                            <a href="javascript:;">
                                                <i class="fa fa-laptop"></i>
                                                <span title="Database Name">@item.appDatabases.dbName</span>
                                            </a>

                                        </li>
                                        <li class="sub-menu">
                                            <a href="javascript:;">
                                                <i class="fa fa-laptop"></i>
                                                <form  asp-action="Index" asp-controller="Form" method="post">
                                                    <input type="text" name="dbName" value="@item.appDatabases.dbName" hidden/>
                                                    <span> <button type="submit" id="previewSystem">Preview System</button></span>
                                                </form>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                            }
                        </ul>
                    </div>
                </div>
            </aside>
            <div id="mainContainer">
            </div>
        </section>

        <script>

                $(document).ready(function () {
                    $("#owl-demo").owlCarousel({
                        navigation: true,
                        slideSpeed: 300,
                        paginationSpeed: 400,
                        singleItem: true,
                        autoPlay: true

                    });
                });


                $(function () {
                    $('select.styled').customSelect();
                });

                $(window).on("resize", function () {
                    var owl = $("#owl-demo").data("owlCarousel");
                    owl.reinit();
                });

        </script>*@
