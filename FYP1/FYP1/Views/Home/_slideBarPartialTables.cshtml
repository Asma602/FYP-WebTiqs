@model IEnumerable<FYP1.Models.Tables>

<link href="~/css/partialSideBar.css" rel="stylesheet" />
<div id="sidebar" class="nav-collapse " >
    <ul class="sidebar-menu" id="nav-accordion">
        <li>
            <a class="active" href="index.html">
                <div class="row">
                    <div class="col-sm-1">
                        <i class="fa fa-dashboard"></i>
                    </div>
                    <div class="col-sm-10">
                        <h6>@ViewBag.databaseName</h6>
                    </div>
                </div>
                @*<span class="setFontTo16"></span>*@
            </a>
        </li>
        @foreach (var item in Model)
        {
            <li class="sub-menu">
                <a href="javascript:;">
                    <i class="fa fa-table "></i>
                    <span style="font-size:18px;">@item.tableName</span>
                </a>
                <ul class="sub">
                    <li class="sub-menu">
                        <a href="javascript:;">
                            <i class="fa fa-columns"></i>
                            <span onclick="addColumn123(@item.id)">Attributes +</span>
                        </a>
                        <ul class="sub">
                            @foreach (var i in item.column)
                            {
                                <li class="text-white" style="font-size:smaller"><i class="fa fa-circle"></i> @i.name</li>
                            }
                        </ul>
                    </li>
                </ul>
            </li>
        }

    </ul>
    <div id="tableDbRelation" class="ml-2">
        <button class="btn text-capitalize p-3" onclick="createTable()" >+ Add Table</button><br />
        <a class="btn text-capitalize" asp-action="relation" >Map  Relation</a><br />
        <button class="btn text-capitalize disabled " onclick="createDatabase()" id="databaseButton">Save Database</button>
    </div>

</div>

<script>

    function createTable(){
        $.ajax({
            url: "/Home/partialTable",
            type: "GET",
            success: function (data) {
                $("#mainContainer").html(data);
            },
            error: function (err) {
                console.error();
            }
        });
    }
    function createDatabase(){

         $.ajax({
            url: "/Home/databaseCreated",
            type: "GET",
            success: function (data) {
                $("#mainContainer").html(data);
                $("#success").click();
            },
            error: function (err) {
                console.error();
            }
        });
    }
      function addColumn123(n){
     $.ajax({
            url: "/Home/viewColumnPartial",
            type: "POST",
             data: {
                tableId: n
            },
            success: function (data) {
                $("#mainContainer").html(data);
            },
            error: function (err) {
                console.error();
            }
        });
    }
</script>
<script src="~/lib/jquery/dist/jquery.js"></script>
<script>
       $(function() {
            if(@Model.Count()>0)
                $("#databaseButton").removeClass("disabled");
            else
                  $("#databaseButton").addClass("disabled");
    }); 
</script>

