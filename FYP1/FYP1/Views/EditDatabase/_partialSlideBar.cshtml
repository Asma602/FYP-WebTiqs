 @model IEnumerable<FYP1.Models.Tables>

<style>
   

        /*#tableDbRelation button, a {
            margin-bottom: 2px;
            margin-left: 10px;
        }*/
    #sidebar {
        width: 250px;
        overflow: hidden;
    }

    .btn {
        border-radius: 5px;
        width:80%;
        font-size: 15px;
        padding:10px;
        background-color: #00b297;
    }
</style>
<div id="sidebar" class="nav-collapse mt-0" >
    <!-- sidebar menu start-->
    <ul class="sidebar-menu mt-1" id="nav-accordion">
        <li>
            <a class="active" href="index.html">
                <div class="row">
                    <div class="col-sm-1">
                        <i class="fa fa-dashboard"></i>
                    </div>
                    <div class="col-sm-10">
                        <h6>@ViewBag.DatbaseName</h6>
                    </div>
                </div>
            </a>
            @foreach (var item in Model)
            {
            <li class="sub-menu">
                <a href="javascript:;">
                    <i class="fa fa-table"></i>
                    <span style="font-size:16px;">@item.tableName<span>
                </a>
                <ul class="sub">

                    <li class="sub-menu pl-3">
                        <a href="javascript:;">
                            @{
                                string tID = "TABLE" + item.id;
                            }
                            <i class="fa fa-columns"></i>
                            <input type="hidden"  id="@tID" value="@item.tableName" />
                            <span onclick="addEditColumn(@item.id)">Attributes +</span>
                        </a>
                        <ul class="sub">
                            @foreach (var i in item.column)
                            {
                                <li class="text-white font-small"> <i class="fa fa-circle"></i>  @i.name</li>
                            }
                        </ul>
                    </li>
                    <li class="sub-menu pl-3">
                        <a href="javascript:;">
                            @{
                                string tiD = "TAB" + item.id;
                            }
                            <input type="hidden" id="@tiD" value="@item.tableName" />
                            <i class="fa fa-trash-o"></i>
                            <span  onclick="deleteTable(@item.id)">Delete Table</span>
                            <input value="@item.id" hidden id="getDeleteTableId" />
                        </a>
                    </li>
                </ul>
            </li>
        }
        </ul>


        <div id="tableDbRelation" class=" ml-2" style="margin-bottom:70px;">
            <a class="btn text-capitalize" onclick="createNewTable()">+ Create New Table</a><br />
            <a class="btn text-capitalize" asp-action="relation">Map Relation</a><br />
        </div>

    </div>
    <script>

        function createNewTable() {
            $.ajax({
                url: "/EditDatabase/partialTable",
                type: "GET",
                success: function (data) {
                    $("#mainContainer").html(data);
                },
                error: function (err) {
                    console.error();
                }
            });
        }

        function addEditColumn(n) {
            $.ajax({
                url: "/EditDatabase/viewColumnPartial",
                type: "POST",
                data: {
                    tableId: n,
                    tableName: $("#TABLE" + n).val()
                },
                success: function (data) {
                    $("#mainContainer").html(data);
                },
                error: function (err) {
                    console.error();
                }
            });
        }
    </script>
    <script src="~/lib/jquery/dist/jquery.js"></script>


